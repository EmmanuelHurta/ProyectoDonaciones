{% extends 'DonacionesApp/base.html' %}
{% load static %}

{% block title %}Detalles de Entrega{% endblock %}

{% block content %}
<div class="card shadow-sm">
    <div class="card-body">
        <h3 class="text-center mb-4">ğŸ“‹ Detalles de la Entrega</h3>

        <!-- Datos del Beneficiario -->
        <h5 class="mb-3" style="border-left: 4px solid #198754; padding-left: 10px;">Datos del Beneficiario</h5>

        <table class="table table-bordered">
            <tr>
                <th>RUT</th>
                <td>{{ entrega.beneficiario.rut }}</td>
            </tr>
            <tr>
                <th>Nombre</th>
                <td>{{ entrega.beneficiario.nombre }}</td>
            </tr>
            <tr>
                <th>DirecciÃ³n</th>
                <td>{{ entrega.beneficiario.direccion|default:"-" }}</td>
            </tr>
            <tr>
                <th>TelÃ©fono</th>
                <td>{{ entrega.beneficiario.telefono|default:"-" }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ entrega.beneficiario.email|default:"-" }}</td>
            </tr>
        </table>

        <!-- Productos Entregados -->
        <h5 class="mt-4 mb-3" style="border-left: 4px solid #198754; padding-left: 10px;">Productos Entregados</h5>

        <table class="table table-striped table-hover">
            <thead class="table-success">
                <tr>
                    <th>ArtÃ­culo</th>
                    <th>DescripciÃ³n</th>
                    <th>Cantidad</th>
                </tr>
            </thead>
            <tbody>
                {% for detalle in entrega.detalles.all %}
                <tr>
                    <td>{{ detalle.articulo.nombreObjeto }}</td>
                    <td>{{ detalle.articulo.descripcion|default:"-" }}</td>
                    <td>{{ detalle.cantidad }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-center text-muted">No hay productos registrados.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- InformaciÃ³n adicional -->
        <h5 class="mt-4 mb-3" style="border-left: 4px solid #198754; padding-left: 10px;">InformaciÃ³n de la Entrega</h5>

        <table class="table table-bordered">
            <tr>
                <th>ID Entrega</th>
                <td>{{ entrega.id }}</td>
            </tr>
            <tr>
                <th>Responsable</th>
                <td>{{ entrega.nombreResponsable }}</td>
            </tr>
            <tr>
                <th>Fecha de Entrega</th>
                <td>{{ entrega.fechaEntrega|date:"d/m/Y" }}</td>
            </tr>
        </table>

        <!-- Botones -->
        <div class="d-flex justify-content-between mt-4">
            <a href="{% url 'listar_entregas' %}" class="btn btn-secondary">â† Volver</a>
            <div>
                <a href="{% url 'editar_entrega' entrega.id %}" class="btn btn-warning text-white">âœï¸ Editar</a>
                <a href="{% url 'eliminar_entrega' entrega.id %}" class="btn btn-danger">ğŸ—‘ï¸ Eliminar</a>
            </div>
        </div>

    </div>
</div>
{% endblock %}
